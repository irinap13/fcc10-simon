$(document).ready(function(){var t,e=[],n=0,o=[],a=!1,s=!1,c=!1,r=0,i=0,l=[],u=!1;$("#btn-onoff").on("click",function(){$(this).hasClass("btn-primary")?(h.turnOff(),$(this).removeClass("btn-primary"),$(this).find("h5").text("OFF")):(h.turnOn(),$(this).addClass("btn-primary"),$(this).find("h5").text("ON"))}),$("#btn-strict").on("click",function(){$(this).hasClass("btn-primary")?(h.strictMode(!1),$(this).removeClass("btn-primary")):(h.strictMode(!0),$(this).addClass("btn-primary"))}),$(".btn-disabled button").on("click",function(){return!1});var h={turnOn:function(){$(".todisable").removeClass("btn-disabled"),$("#btn-start").one("click",function(){h.start()})},turnOff:function(){$(".todisable").addClass("btn-disabled"),$("#btn-start, #btn-strict").removeClass("btn-primary"),$("#count_text").text("--"),h.reset()},reset:function(){e=[],n=0,o=[],a=!1,s=!1,c=!1,r=0,i=0,l=[],u=!1,$("#count_text").text("--")},strictMode:function(t){u=t},generateMoves:function(){function t(t,e){return Math.floor(Math.random()*(e-t+1))+t}for(var n=0;10>n;n++)e.push(t(1,4))},highlightColor:function(t){a=!1;for(var e=0;e<t.length;e++)h.highlight(t[e],e),e===t.length-1&&(a=!0)},highlight:function(t,e){setTimeout(function(){$("#c"+t).addClass("highlight"),setTimeout(function(){$("#c"+t).removeClass("highlight")},500),$("#audio"+t)[0].play()},1e3*e)},start:function(){$("#btn-start").addClass("btn-primary"),h.generateMoves(),n=1,h.makeMove()},makeMove:function(){var t=e[n-1];o.push(t),$("#count_text").text(o.length),h.highlightColor(o),o.length===e.length-1&&h.generateMoves(),a&&($(".color-block").removeClass("btn-disabled"),h.waitForUser(),n++)},waitForUser:function(){var e=0;r=1,t=setInterval(function(){e++,10===e&&h.lostGame()},1e3),l=[],$(".color-block").unbind("click").on("click",function(){if(null!==$(this)[0].className.match(/btn-disabled/g))return!1;clearInterval(t);var e=parseInt($(this)[0].id.replace("c",""));l.push(e),h.highlight(e,0),h.checkUserMove(l,e),r++})},checkUserMove:function(t,e){function n(t,e){t.length===e.length&&($(".color-block").addClass("btn-disabled"),s=!0);for(var n=t.length;n--;)t[n]!==e[n]&&($(".color-block").addClass("btn-disabled"),c=!0)}s=!1,c=!1,n(t,o),c&&h.lostGame(),s&&!c&&setTimeout(function(){h.makeMove()},1e3)},lostGame:function(){u?($("#count_text").text("! !"),setTimeout(function(){h.reset()},1e3),setTimeout(function(){h.start()},2e3)):($("#count_text").text("! !"),n--,o.pop(),setTimeout(function(){h.makeMove()},1e3))}}});
